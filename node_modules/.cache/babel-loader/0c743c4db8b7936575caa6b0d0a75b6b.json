{"ast":null,"code":"var _jsxFileName = \"G:\\\\workspaces\\\\reactWorkspace\\\\olx\\\\frontend\\\\src\\\\pages\\\\AddAd\\\\index.js\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { PageArea, SearchArea } from \"./styled.js\";\nimport { PageContainer, PageTitle, ErrorMessage } from \"../../components/MainComponents\";\nimport useApi from \"../../helpers/OlxApi\";\nimport MaskedInput from \"react-text-mask\";\nimport createNumberMask from \"text-mask-addons/dist/createNumberMask\";\n\nconst App = () => {\n  const api = useApi();\n  const filedField = useRef();\n  const history = useHistory();\n  const [categories, setCategories] = useState([]);\n  const [title, setTitle] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [priceNegotiable, setPriceNegotiable] = useState(false);\n  const [desc, setDesct] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [disabled, setDisabeled] = useState(false);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    const getCategories = async () => {\n      const cats = await api.getCategories();\n      setCategories(cats);\n    };\n\n    getCategories();\n  }, []);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setDisabeled(true);\n    setError(\"\");\n    let errors = [];\n\n    if (!title.trim()) {\n      errors.push(\"Sem titulo\");\n    }\n\n    if (!category) {\n      errors.push(\"Sem categoria\");\n    }\n\n    if (errors.lenght === 0) {\n      const fData = new FormData();\n      fData.append(\"title\", title);\n      fData.append(\"price\", price);\n      fData.append(\"priceneg\", priceNegotiable);\n      fData.append(\"desc\", desc);\n      fData.append(\"cat\", category);\n\n      if (filedField.current.files.lenght > 0) {\n        for (let i = 0; i < filedField.current.files.lenght; i++) {\n          fData.append(\"img\", filedField.current.files[i]);\n        }\n      }\n\n      const json = await api.addAd(fData);\n\n      if (!json.error) {\n        history.push(`/ad/${json.id}`);\n        return;\n      } else {\n        setError(json.error);\n      }\n    } else {\n      setError(errors.join(\"\\n\"));\n    }\n\n    setDisabeled(false);\n  };\n\n  const priceMask = createNumberMask({\n    prefix: \"R$ \",\n    includeThousandsSeparator: true,\n    thousandsSeparatorSymbol: \".\",\n    allowDecimal: true,\n    decimalSymbol: \",\"\n  });\n  return /*#__PURE__*/React.createElement(PageContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Postar um an\\xFAncio\"), /*#__PURE__*/React.createElement(PageArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, error && /*#__PURE__*/React.createElement(ErrorMessage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }, error), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"T\\xEDtulo:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Digite o titulo\",\n    disabled: disabled,\n    required: true,\n    value: title,\n    onChange: e => setTitle(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Categoria:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    disable: disabled,\n    onChange: e => setCategory(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }), categories && categories.map(i => /*#__PURE__*/React.createElement(\"option\", {\n    key: i._id,\n    value: i._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, i.name))))), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Pre\\xE7o\"), /*#__PURE__*/React.createElement(MaskedInput, {\n    mask: priceMask,\n    placeholder: \"R$\",\n    value: price,\n    onChange: e => setPrice(e.target.value),\n    disabled: disabled || priceNegotiable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"Pre\\xE7o negoc\\xEDavel\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    disabled: disabled,\n    checked: priceNegotiable,\n    onChange: e => setPriceNegotiable(!priceNegotiable),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, \"Descri\\xE7\\xE3o:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    disabled: disabled,\n    value: desc,\n    onChange: e => setDesct(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \"Imagens (1 ou Mais):\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    disabled: disabled,\n    multiple: true,\n    ref: filedField,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"area--input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"Cadastrar an\\xFAncio\"))))));\n};\n\nexport default App;","map":{"version":3,"sources":["G:/workspaces/reactWorkspace/olx/frontend/src/pages/AddAd/index.js"],"names":["React","useState","useRef","useEffect","useHistory","PageArea","SearchArea","PageContainer","PageTitle","ErrorMessage","useApi","MaskedInput","createNumberMask","App","api","filedField","history","categories","setCategories","title","setTitle","price","setPrice","priceNegotiable","setPriceNegotiable","desc","setDesct","category","setCategory","disabled","setDisabeled","error","setError","getCategories","cats","handleSubmit","e","preventDefault","errors","trim","push","lenght","fData","FormData","append","current","files","i","json","addAd","id","join","priceMask","prefix","includeThousandsSeparator","thousandsSeparatorSymbol","allowDecimal","decimalSymbol","target","value","map","_id","name"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { PageArea, SearchArea } from \"./styled.js\";\r\nimport {\r\n  PageContainer,\r\n  PageTitle,\r\n  ErrorMessage,\r\n} from \"../../components/MainComponents\";\r\nimport useApi from \"../../helpers/OlxApi\";\r\nimport MaskedInput from \"react-text-mask\";\r\nimport createNumberMask from \"text-mask-addons/dist/createNumberMask\";\r\n\r\nconst App = () => {\r\n  const api = useApi();\r\n\r\n  const filedField = useRef();\r\n  const history = useHistory();\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [priceNegotiable, setPriceNegotiable] = useState(false);\r\n  const [desc, setDesct] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [disabled, setDisabeled] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const getCategories = async () => {\r\n      const cats = await api.getCategories();\r\n      setCategories(cats);\r\n    };\r\n    getCategories();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setDisabeled(true);\r\n    setError(\"\");\r\n    let errors = [];\r\n    if (!title.trim()) {\r\n      errors.push(\"Sem titulo\");\r\n    }\r\n    if (!category) {\r\n      errors.push(\"Sem categoria\");\r\n    }\r\n\r\n    if (errors.lenght === 0) {\r\n      const fData = new FormData();\r\n      fData.append(\"title\", title);\r\n      fData.append(\"price\", price);\r\n      fData.append(\"priceneg\", priceNegotiable);\r\n      fData.append(\"desc\", desc);\r\n      fData.append(\"cat\", category);\r\n      if (filedField.current.files.lenght > 0) {\r\n        for (let i = 0; i < filedField.current.files.lenght; i++) {\r\n          fData.append(\"img\", filedField.current.files[i]);\r\n        }\r\n      }\r\n\r\n      const json = await api.addAd(fData);\r\n      if (!json.error) {\r\n        history.push(`/ad/${json.id}`);\r\n        return;\r\n      } else {\r\n        setError(json.error);\r\n      }\r\n    } else {\r\n      setError(errors.join(\"\\n\"));\r\n    }\r\n    setDisabeled(false);\r\n  };\r\n  const priceMask = createNumberMask({\r\n    prefix: \"R$ \",\r\n    includeThousandsSeparator: true,\r\n    thousandsSeparatorSymbol: \".\",\r\n    allowDecimal: true,\r\n    decimalSymbol: \",\",\r\n  });\r\n\r\n  return (\r\n    <PageContainer>\r\n      <PageTitle>Postar um anúncio</PageTitle>\r\n      <PageArea>\r\n        {error && <ErrorMessage>{error}</ErrorMessage>}\r\n        <form onSubmit={handleSubmit}>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\">Título:</div>\r\n            <div className=\"area--input\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Digite o titulo\"\r\n                disabled={disabled}\r\n                required\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n              />\r\n            </div>\r\n          </label>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\">Categoria:</div>\r\n            <div className=\"area--input\">\r\n              <select\r\n                disable={disabled}\r\n                onChange={(e) => setCategory(e.target.value)}\r\n                required\r\n              >\r\n                <option></option>\r\n                {categories &&\r\n                  categories.map((i) => (\r\n                    <option key={i._id} value={i._id}>\r\n                      {i.name}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n          </label>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\">Preço</div>\r\n            <MaskedInput\r\n              mask={priceMask}\r\n              placeholder=\"R$\"\r\n              value={price}\r\n              onChange={(e) => setPrice(e.target.value)}\r\n              disabled={disabled || priceNegotiable}\r\n            />\r\n          </label>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\">Preço negocíavel</div>\r\n            <div className=\"area--input\">\r\n              <input\r\n                type=\"checkbox\"\r\n                disabled={disabled}\r\n                checked={priceNegotiable}\r\n                onChange={(e) => setPriceNegotiable(!priceNegotiable)}\r\n              />\r\n            </div>\r\n          </label>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\">Descrição:</div>\r\n            <div className=\"area--input\">\r\n              <textarea\r\n                disabled={disabled}\r\n                value={desc}\r\n                onChange={(e) => setDesct(e.target.value)}\r\n              ></textarea>\r\n            </div>\r\n          </label>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\">Imagens (1 ou Mais):</div>\r\n            <div className=\"area--input\">\r\n              <input\r\n                type=\"file\"\r\n                disabled={disabled}\r\n                multiple\r\n                ref={filedField}\r\n              />\r\n            </div>\r\n          </label>\r\n          <label className=\"area\">\r\n            <div className=\"area--title\"></div>\r\n            <div className=\"area--input\">\r\n              <button>Cadastrar anúncio</button>\r\n            </div>\r\n          </label>\r\n        </form>\r\n      </PageArea>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}