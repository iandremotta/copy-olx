{"ast":null,"code":"import Cookies from \"js-cookie\";\nimport qs from \"qs\";\nconst BASEAPI = \"http://alunos.b7web.com.br:501\";\n\nconst apiFetchPost = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get(\"token\");\n\n    if (token) {\n      body.token = token;\n    }\n  }\n\n  const res = await fetch(BASEAPI + endpoint, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = \"/signin\";\n    return;\n  }\n\n  return json;\n};\n\nconst apiFetchFile = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get(\"token\");\n\n    if (token) {\n      body.append(\"token\", token);\n    }\n  }\n\n  const res = await fetch(BASEAPI + endpoint, {\n    method: \"POST\",\n    body\n  });\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = \"/signin\";\n    return;\n  }\n\n  return json;\n};\n\nconst apiFetchGet = async (endpoint, body = []) => {\n  if (!body.token) {\n    let token = Cookies.get(\"token\");\n\n    if (token) {\n      body.token = token;\n    }\n  }\n\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = \"/signin\";\n    return;\n  }\n\n  return json;\n};\n\nconst OlxAPI = {\n  login: async (email, password) => {\n    const json = await apiFetchPost(\"/user/signin\", {\n      email,\n      password\n    });\n    return json;\n  },\n  register: async (name, email, password, stateLoc) => {\n    const json = await apiFetchPost(\"/user/signup\", {\n      name,\n      email,\n      password,\n      state: stateLoc\n    });\n    return json;\n  },\n  getStates: async () => {\n    const json = await apiFetchGet(\"/states\");\n    return json.states;\n  },\n  getCategories: async () => {\n    const json = await apiFetchGet(\"/categories\");\n    return json.categories;\n  },\n  getAds: async options => {\n    const json = await apiFetchGet(\"/ad/list\", options);\n    return json;\n  },\n  getAd: async (id, other = false) => {\n    const json = await apiFetchGet(\"/ad/item\", {\n      id,\n      other\n    });\n    return json;\n  },\n  addAd: async fData => {\n    const json = await apiFetchFile(\"/ad/add\", fData);\n    return json;\n  }\n};\nexport default (() => OlxAPI);","map":{"version":3,"sources":["G:/workspaces/reactWorkspace/olx/frontend/src/helpers/OlxApi.js"],"names":["Cookies","qs","BASEAPI","apiFetchPost","endpoint","body","token","get","res","fetch","method","headers","Accept","JSON","stringify","json","notallowed","window","location","href","apiFetchFile","append","apiFetchGet","OlxAPI","login","email","password","register","name","stateLoc","state","getStates","states","getCategories","categories","getAds","options","getAd","id","other","addAd","fData"],"mappings":"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","sourcesContent":["import Cookies from \"js-cookie\";\r\nimport qs from \"qs\";\r\nconst BASEAPI = \"http://alunos.b7web.com.br:501\";\r\n\r\nconst apiFetchPost = async (endpoint, body) => {\r\n  if (!body.token) {\r\n    let token = Cookies.get(\"token\");\r\n    if (token) {\r\n      body.token = token;\r\n    }\r\n  }\r\n\r\n  const res = await fetch(BASEAPI + endpoint, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  const json = await res.json();\r\n\r\n  if (json.notallowed) {\r\n    window.location.href = \"/signin\";\r\n    return;\r\n  }\r\n  return json;\r\n};\r\n\r\nconst apiFetchFile = async (endpoint, body) => {\r\n  if (!body.token) {\r\n    let token = Cookies.get(\"token\");\r\n    if (token) {\r\n      body.append(\"token\", token);\r\n    }\r\n  }\r\n\r\n  const res = await fetch(BASEAPI + endpoint, {\r\n    method: \"POST\",\r\n    body,\r\n  });\r\n\r\n  const json = await res.json();\r\n\r\n  if (json.notallowed) {\r\n    window.location.href = \"/signin\";\r\n    return;\r\n  }\r\n  return json;\r\n};\r\n\r\nconst apiFetchGet = async (endpoint, body = []) => {\r\n  if (!body.token) {\r\n    let token = Cookies.get(\"token\");\r\n    if (token) {\r\n      body.token = token;\r\n    }\r\n  }\r\n\r\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\r\n\r\n  const json = await res.json();\r\n\r\n  if (json.notallowed) {\r\n    window.location.href = \"/signin\";\r\n    return;\r\n  }\r\n  return json;\r\n};\r\n\r\nconst OlxAPI = {\r\n  login: async (email, password) => {\r\n    const json = await apiFetchPost(\"/user/signin\", { email, password });\r\n    return json;\r\n  },\r\n\r\n  register: async (name, email, password, stateLoc) => {\r\n    const json = await apiFetchPost(\"/user/signup\", {\r\n      name,\r\n      email,\r\n      password,\r\n      state: stateLoc,\r\n    });\r\n    return json;\r\n  },\r\n\r\n  getStates: async () => {\r\n    const json = await apiFetchGet(\"/states\");\r\n    return json.states;\r\n  },\r\n\r\n  getCategories: async () => {\r\n    const json = await apiFetchGet(\"/categories\");\r\n    return json.categories;\r\n  },\r\n\r\n  getAds: async (options) => {\r\n    const json = await apiFetchGet(\"/ad/list\", options);\r\n    return json;\r\n  },\r\n\r\n  getAd: async (id, other = false) => {\r\n    const json = await apiFetchGet(\"/ad/item\", { id, other });\r\n    return json;\r\n  },\r\n\r\n  addAd: async (fData) => {\r\n    const json = await apiFetchFile(\"/ad/add\", fData);\r\n    return json;\r\n  },\r\n};\r\n\r\nexport default () => OlxAPI;\r\n"]},"metadata":{},"sourceType":"module"}